#!/bin/bash

main_Menu()
{
   clear
   echo "      *** Proyecto Final de Ethical Hacking ***
   Script que realiza ataques de forma automatizada.

   Para realizar los ataques, es necesario realizar las siguientes acciones:
   1. Identificar targets vulnerables
   2. Encontrar informacion y vulnerabilidades del o los targets.
   3. Explotar vulnerabilidades.
   4. * Realizar todo automaticamente.*

   Seleccione mediante un numero la accion que desea realizar:" 

   read -n1 -s
   case "$REPLY" in
   "1") echo "*** Identificar targets vulnerables ***"
        findTargets_Menu;;
   "2") echo "*** Encontrar informacion y vulnerabilidades ***"
        getVulnerabilities_Menu;;
   "3") echo "*** Explotar vulnerabilidades. ***"
        exploitVulnerabilities_Menu;;
   "4") echo "*** Realizar todo automaticamente ***"
        automaticExploit_Menu;;
     *) echo "Opcion invalida!"
        sleep 1
        clear
        main_Menu;;
   esac
}

findTargets()
{ 
   #Revisa solo si el puerto 80 esta abierto
   local puerto=$1

   if [ $puerto ]
   then
      masscan $puerto -p80 > masscanResult
      #Guarda solo las ips con el puerto 80 abierto
      grep -o "[1-255].*" masscanResult
   else
      echo "Vacio"
   fi 
}

getVulnerabilities_Menu()
{
   clear
   echo "      Vulnerabilities"
}

exploitVulnerabilities_Menu()
{
   clear
   echo "      Explot"
}

automaticExploit_Menu()
{
  clear
  echo "    *** Explotar automaticamente ***
Para realizar un ataque automatico, es necesario definir un target para realizar los ataques (puede ser un rango), asÃ­ como el tipo de ataque que se desea realizar (si es posible realizarlo)

Opciones disponibles:
   1. SQL injection
   2. XSS
   3. Todos
   4. Regresar
Seleccione mediante un numero la accion que desea realizar:"

   read -n1 -s
   case "$REPLY" in
   "1") echo "*** SQL injection ***";;
   "2") echo "*** XSS ***";;
   "3") echo "*** TODOS PLACEHOLDER ***";;
   "4") echo "*** Regresar ***"
        main_menu;;
     *) echo "Opcion invalida!"
        sleep 1
        clear
        automaticExploit_Menu;;
   esac
}

findTargets_Menu()
{
   local inputTargets

   clear
   echo "      *** Identificar targets vulnerables ***"
   echo "Puede dentificar targets vulnerables de acuerdo: 
         -> Un target especifico (ejemplo: 127.0.0.1)
         -> Un rango de red (ejemplo: 127.0.0.1/24)
         -> Un archivo con targets espeficios (ejemplo: targets.txt)
            (cat targets.txt:
                 127.0.0.1
                 128.0.0.2
                 ...)
         "
   echo "Introduzca target or targets (como ip, rango o archivo)"
        read inputTargets
        clear
        echo "Escaneando para " $inputTargets " targets"
        findTargets inputTargets
}

findTargets_Menu

